<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-tw" xml:lang="zh-tw">
  <head>
    <title>美化代码 | 禅与 Objective-C 编程艺术</title>
    <meta content="" name="description"/>
    <meta content="GitBook 2.4.3" name="generator"/>
    <meta content="Yourtion" name="author"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        
        
<div class="page">
    <h1 class="book-chapter" id="calibre_toc_27">美化代码</h1>
    
        <div class="normal" id="section-">
        
            <h1 id="%E7%BE%8E%E5%8C%96%E4%BB%A3%E7%A0%81" class="calibre1">美化代码</h1>
<h3 id="%E7%A9%BA%E6%A0%BC" class="calibre14">空格</h3>
<ul class="calibre11">
<li class="calibre3">缩进使用 4 个空格。 永远不要使用  tab, 确保你在 Xcode 的设置里面是这样设置的。</li>
<li class="calibre3">方法的大括号和其他的大括号(<code class="pcalibre6 pcalibre5 calibre13">if</code>/<code class="pcalibre6 pcalibre5 calibre13">else</code>/<code class="pcalibre6 pcalibre5 calibre13">switch</code>/<code class="pcalibre6 pcalibre5 calibre13">while</code> 等) 总是在同一行开始，在新起一行结束。</li>
</ul>
<p class="calibre7"><strong class="calibre10">推荐:</strong></p>
<pre class="calibre12"><code class="pcalibre4 pcalibre3 lang-obj-c"><span class="hljs-keyword">if</span> (user<span class="hljs-variable">.isHappy</span>) {
    <span class="hljs-comment">//Do something</span>
}
<span class="hljs-keyword">else</span> {
    <span class="hljs-comment">//Do something else</span>
}
</code></pre>
<p class="calibre7"><strong class="calibre10">不推荐:</strong></p>
<pre class="calibre12"><code class="pcalibre4 pcalibre3 lang-obj-c"><span class="hljs-keyword">if</span> (user<span class="hljs-variable">.isHappy</span>)
{
  <span class="hljs-comment">//Do something</span>
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">//Do something else</span>
}
</code></pre>
<ul class="calibre11">
<li class="calibre3">方法之间应该要有一个空行来帮助代码看起来清晰且有组织。 方法内的空格应该用来分离功能，但是通常不同的功能应该用新的方法来定义。</li>
<li class="calibre3">优先使用 auto-synthesis。但是如果必要的话， <code class="pcalibre6 pcalibre5 calibre13">@synthesize</code> and <code class="pcalibre6 pcalibre5 calibre13">@dynamic</code> </li>
<li class="calibre3">在实现文件中的声明应该新起一行。</li>
<li class="calibre3">应该总是让冒号对齐。有一些方法签名可能超过三个冒号，用冒号对齐可以让代码更具有可读性。即使有代码块存在，也应该用冒号对齐方法。</li>
</ul>
<p class="calibre7"><strong class="calibre10">推荐:</strong></p>
<pre class="calibre12"><code class="pcalibre4 pcalibre3 lang-obj-c">[<span class="hljs-built_in">UIView</span> animateWithDuration:<span class="hljs-built_in">1.0</span>
                 animations:^{
                     <span class="hljs-comment">// something</span>
                 }
                 completion:^(<span class="hljs-built_in">BOOL</span> finished) {
                     <span class="hljs-comment">// something</span>
                 }];
</code></pre>
<p class="calibre7"><strong class="calibre10">不推荐:</strong></p>
<pre class="calibre12"><code class="pcalibre4 pcalibre3 lang-obj-c">[<span class="hljs-built_in">UIView</span> animateWithDuration:<span class="hljs-built_in">1.0</span> animations:^{
    <span class="hljs-comment">// something </span>
} completion:^(<span class="hljs-built_in">BOOL</span> finished) {
    <span class="hljs-comment">// something</span>
}];
</code></pre>
<p class="calibre7">如果自动对齐让可读性变得糟糕，那么应该在之前把 block 定义为变量，或者重新考虑你的代码签名设计。</p>
<h3 id="%E6%8D%A2%E8%A1%8C" class="calibre14">换行</h3>
<p class="calibre7">本指南关注代码显示效果以及在线浏览的可读性，所以换行是一个重要的主题。</p>
<p class="calibre7">举个例子：</p>
<pre class="calibre12"><code class="pcalibre4 pcalibre3 lang-obj-c"><span class="hljs-keyword">self</span><span class="hljs-variable">.productsRequest</span> = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers];
</code></pre>
<p class="calibre7">一个像上面的长行的代码在第二行以一个间隔（2个空格）延续</p>
<pre class="calibre12"><code class="pcalibre4 pcalibre3 lang-obj-c"><span class="hljs-keyword">self</span><span class="hljs-variable">.productsRequest</span> = [[SKProductsRequest alloc] 
  initWithProductIdentifiers:productIdentifiers];
</code></pre>
<h3 id="%E6%8B%AC%E5%8F%B7" class="calibre14">括号</h3>
<p class="calibre7">在以下的地方使用 <a href="https://en.wikipedia.org/wiki/Indent_style#K.26R_style" target="_blank" class="calibre4 pcalibre pcalibre1 pcalibre2">Egyptian风格 括号</a> （译者注：又称 K&amp;R 风格，代码段括号的开始位于一行的末尾，而不是另外起一行的风格。关于为什么叫做 Egyptian Brackets，可以参考 <a href="http://blog.codinghorror.com/new-programming-jargon/" target="_blank" class="calibre4 pcalibre pcalibre1 pcalibre2">http://blog.codinghorror.com/new-programming-jargon/</a> )</p>
<ul class="calibre11">
<li class="calibre3">控制语句 (if-else, for, switch)</li>
</ul>
<p class="calibre7">非 Egyptian 括号可以用在：</p>
<ul class="calibre11">
<li class="calibre3">类的实现（如果存在)</li>
<li class="calibre3">方法的实现</li>
</ul>

        
        </div>
    
</div>

        
        
    
    

</body></html>
